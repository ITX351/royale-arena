# Royale Arena 项目总览

## 项目简介

Royale Arena是一个基于网页的大逃杀游戏，玩家可以在特定时间段内执行行动，包括移动、搜索、攻击和使用道具等操作。游戏采用现代化的前后端分离架构，为玩家和导演提供流畅的交互体验。

## 技术架构

### 整体架构
- 前端：Vue3 + TypeScript + Vite，采用客户端渲染(CSR)部署到Nginx服务器
- 后端：Rust语言开发，提供REST API和WebSocket接口
- 数据存储：
  - 静态数据（玩家信息等）存储在MySQL数据库
  - 动态游戏数据仅在内存中处理，行动结束后保存到本地文件

### 核心组件
1. 前端应用：玩家交互界面和导演控制台
2. 后端服务：API服务器和WebSocket服务器
3. 数据存储：MySQL数据库和本地文件存储

## 开发约束

1. 不使用游戏引擎或第三方实时通信服务
2. 不使用ORM框架操作MySQL
3. WebSocket仅处理实时操作指令
4. REST API处理认证和状态查询
5. 游戏过程中不访问数据库

## 文档结构

- QWEN.md（项目总览、前端上下文、后端上下文）
- docs/（文档目录，所有新文档和原有文档的维护都应当在此目录中进行，避免将文档存储到代码目录当中）
- docs/api/（API规范目录，阅读目录下README.md）
- docs/game-rules.md（游戏规则）

## 开发要求

- 开发环境在Windows下，不尝试执行任何只可以在Linux执行的命令行。所有指令均使用Windows终端允许执行的命令。
- 不需要尝试新建文件夹，可以通过直接创建指定的新文件的方式自动创建新文件夹。
- 不执行`docker compose up`或`cargo run`等命令，因为这些命令会阻塞CLI终端导致后续操作无法正确运行。需要执行测试时由用户进行配合。
- CLI所有交互使用简体中文。
- 推进开发时，读取任务列表`task-list.md`，根据任务列表完成适量的开发内容。完成一部分开发后，自动更新任务列表的状态进行相关标注。
- 最大限度保证代码的复用和可读性，避免重复复制粘贴大量代码。

## 代码规范

### 代码组织
- 每个模块应有清晰的职责划分，相关功能应组织在同一模块内
- 避免过大的文件，适时拆分代码到子模块

### 性能考虑
- 避免不必要的克隆操作
- 合理使用引用和生命周期（Rust特定）
- 对于热点代码路径，考虑性能优化

### 测试开发
- 避免代码重复：测试代码也应遵循DRY原则，对于公用的功能应定义公用函数供各个测试模块调用
- 模块化测试：对于有代码复用需求的测试模块，应定义相关的辅助函数避免大量代码的复制粘贴
- 需要处理mysql数据库时，通过compose mysql容器对数据库进行访问。mysql的密码存在.env文件中，使用root认证，将密码明文写到指令中。